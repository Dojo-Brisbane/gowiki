<!DOCTYPE html>
<html>

<head>
    <title>{{.WikiPageRevision.Title}}</title>
    <link type="text/css" rel="stylesheet" href="/lib/styles.css">
    <link type="test/css" rel="stylesheet" href="/lib/san-francisco.css">
    <meta charset='utf-8'>
</head>

<body>
    <div id="Modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h1>Are you sure ?</h1>
            <br>
            <p>Do you really want to delete the page {{.WikiPageRevision.Title}}</p>
            <a href="/pages/delete/{{.WikiPageRevision.InternalId}}">Yes!</a> Please delete the page.<br>
        </div>
    </div>

    <div class="navvy">
        <ul>
            <li class="menu-home"><a href="/"></a></li>
            {{if eq .WikiPageRevision.UserLoggedIn "Unauthorized"}}
                <li class="menu-help"><a href="/ticket/new"></a></li>
            {{else}}
            <li class="menu-create"><a href="/pages/create/"></a></li>
            <li class="menu-help"><a href="/ticket/new"></a></li>
            {{end}}
            <li id="search">
                <div class="search-container">
                    <form action="/pages/search" method="GET">
                        <input type="search" class="search-input" id="input-query" name="q" placeholder="Search"
                            value="">
                        <button class="navbar-search-button" type="submit">Search</button>
                    </form>
                </div>
            </li>
            <li style="float:right">
                {{if eq .WikiPageRevision.UserLoggedIn "Unauthorized"}}
                <div class="dropdown">
                    <button class="dropbtn user">Hello, Guest!
                    </button>
                    <div class="dropdown-content-right menu-login">
                        <a href="/users/login">Login</a>
                    </div>
                </div>
                {{else}}
                <div class="dropdown">
                    <button class="dropbtn user">Hello, {{.WikiPageRevision.UserLoggedIn}}!
                    </button>
                    <div class="dropdown-content-right menu-login">
                        <a href="/users/logout">Logout</a>
                    </div>
                </div>
                {{end}}
            </li>
            <li style="float:right">
                <div class="dropdown">
                    <button class="dropbtn setting">
                    </button>
                    <div class="dropdown-content">
                        {{if eq .WikiPageRevision.UserLoggedIn "Unauthorized"}}
                        <a class="menu-user-add" href="/users/create">Sign in</a>
                        {{else}}
                        <a class="menu-user-add" href="/users/create">Create user</a>
                        <a class="menu-ticket-queue" href="/ticket/queue">Ticket Queue</a>
                        <a class="menu-category" href="/categories/create">Add category</a>
                        <a class="menu-recycle-bin" href="/pages/trash">Recycle Bin</a>
                        {{end}}
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div class="clearfix"></div>
    <div class="container">
    <div class="left">
        <script type="text/javascript" src="/lib/view.js"></script>
        <div class="header-text">
            <h1>Revision {{.WikiPageRevision.RevisionId}} of {{.WikiPageRevision.Title}}</h1>
            {{if eq .WikiPageRevision.UserLoggedIn "Unauthorized"}}
            {{else}}
                <br><a href="/revisions/rollback/{{.WikiPageRevision.InternalId}}">Rollback to this version</a>
            {{end}}
        </div>
        <div>
            Created by {{.WikiPageRevision.CreatedBy}} on {{.WikiPageRevision.DateCreated}} UTC
            {{ if .WikiPageRevision.LastModifiedBy }}
            <br>
            Last Modified by {{.WikiPageRevision.LastModifiedBy}} on {{.WikiPageRevision.LastModified}} UTC
            {{ end }}
            <br>
            {{ if .WikiPageRevision.Tags }}
                Categories:
                {{ range $i, $el := .WikiPageRevision.Tags }}
                    <div class="categories">{{ $el }}</div>
                {{ end }}
            {{ end }}
        </div>
        <br>
        <div>{{.WikiPageRevision.DisplayBody}}</div>
    </div>
    <div class="right">
        <script type="text/javascript" src="/lib/view.js"></script>
        <div class="header-text">
            <h1>Current version of {{.WikiPage.Title}}</h1>
            <br><a href="/pages/view/{{.WikiPageRevision.WikiPageId}}">Visit current version</a>
        </div>
        <div>
            Created by {{.WikiPage.CreatedBy}} on {{.WikiPage.DateCreated}} UTC
            {{ if .WikiPage.LastModifiedBy }}
                <br>
                Last Modified by {{.WikiPage.LastModifiedBy}} on {{.WikiPage.LastModified}} UTC
            {{ end }}
            <br>
            {{ if .WikiPage.Tags }}
                Categories:
                {{ range $i, $el := .WikiPage.Tags }}
                    <div class="categories">{{ $el }}</div>
                {{ end }}
            {{ end }}
        </div>
        <br>
        <div>{{.WikiPage.DisplayBody}}</div>
    </div>
    </div>
    <hr>
    <div class="container">
        &nbsp;2020 © <a href="http://www.github.com/zerodayz" target="_blank">Robin Černín</a>. Brisbane, Australia.
    </div>
</body>

</html>